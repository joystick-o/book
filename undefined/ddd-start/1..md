# 1. ë„ë©”ì¸ ëª¨ë¸ ì‹œì‘

## ì—”í‹°í‹°ì™€ ë°¸ë¥˜

ë„ì¶œí•œ ëª¨ë¸ì€ í¬ê²Œ ì—”í‹°í‹°\(entity\) ì™€ ë°¸ë¥˜\(Value\)ë¡œ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤.

![](../../.gitbook/assets/image%20%2856%29.png)

### ì—”í‹°í‹°

ì—”í‹°í‹°ì˜ ê°€ì¥ í° íŠ¹ì§•ì€ ì‹ë³„ìë¥¼ ê°–ëŠ”ë‹¤ëŠ” ê²ƒì´ë‹¤.  
ì£¼ë¬¸ ë„ë©”ì¸ì—ì„œ ê° ì£¼ë¬¸ì€ ì£¼ë¬¸ë²ˆí˜¸ë¥¼ ê°–ëŠ”ë° ì´ ì£¼ë¬¸ë²ˆí˜¸ëŠ” ê° ì£¼ë¬¸ë§ˆë‹¤ ì„œë¡œ ë‹¤ë¥´ë‹¤.  
ë”°ë¼ì„œ, ì£¼ë¬¸ë²ˆí˜¸ê°€ ì£¼ë¬¸ì˜ ì‹ë³„ìê°€ ëœë‹¤.  
ì£¼ë¬¸ ë„ë©”ì¸ ëª¨ë¸ì—ì„œ ì£¼ë¬¸ì— í•´ë‹¹í•˜ëŠ” í´ë˜ìŠ¤ê°€ Orderì´ë¯€ë¡œ Orderê°€ ì—”í‹°í‹°ê°€ ë˜ë©° ì£¼ë¬¸ë²ˆí˜¸ë¥¼ ì†ì„±ìœ¼ë¡œ ê°–ëŠ”ë‹¤.

![](../../.gitbook/assets/image%20%2855%29.png)

ì—”í‹°í‹°ì˜ ì‹ë³„ìëŠ” ë°”ë€Œì§€ ì•ˆí˜¹ ê³ ìœ í•˜ê¸° ë•Œë¬¸ì— ë‘ ì—”í‹°í‹° ê°ì²´ì˜ ì‹ë³„ìê°€ ê°™ìœ¼ë©´ ë‘ ì—ë‹¡í‹°ëŠ” ê°™ë‹¤ê³  íŒë‹¨í•  ìˆ˜ ìˆë‹¤.

### ì—”í‹°í‹°ì˜ ì‹ë³„ì ìƒì„±

ì—”í‹°í‹°ì˜ ì‹ë³„ìë¥¼ ìƒì„±í•˜ëŠ” ì‹œì ì€ ë„ë©”ì¸ì˜ íŠ¹ì§•ê³¼ ì‚¬ìš©í•˜ëŠ” ê¸°ìˆ ì— ë”°ë¼ ë‹¬ë¼ì§„ë‹¤.  
í”íˆ ì‹ë³„ìëŠ” ë‹¤ìŒ ì¤‘ í•œê°€ì§€ ë°©ì‹ìœ¼ë¡œ ìƒì„±í•œë‹¤.

* íŠ¹ì • ê·œì¹™ì— ë”°ë¼ ìƒì„±
* UUID ì‚¬ìš©
* ê°’ì„ ì§ì ‘ ì…ë ¥
* ì¼ë ¨ë²ˆí˜¸ ì‚¬ìš©\(ì‹œí€€ìŠ¤ë‚˜ DBì˜ ìë™ ì¦ê°€ ì¹¼ëŸ¼\)

í”íˆ ì‚¬ìš©í•˜ëŠ” ê·œì¹™ì€ í˜„ì¬ ì‹œê°„ê³¼ ë‹¤ë¥¸ ê°’ì„ í•¨ê»˜ ì¡°í•©í•˜ëŠ” ê²ƒì´ë‹¤.  
ì£¼ì˜í•  ì ì€ ë™ì‹œì— ì‹ë³„ìë¥¼ ìƒì„±í•  ë•Œ ê°™ì€ ì‹ë³„ìê°€ ë§Œë“¤ì–´ì§€ë©´ ì•ˆ ëœë‹¤ëŠ” ê²ƒì´ë‹¤.

UUID\(universallu unique identifier\)ë¥¼ ì‚¬ìš©í•´ì„œ ì‹ë³„ìë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤.

```java
UUID uuid = UUID.eandomUUID();
String strUuid = uuid.toString();
```

íšŒì› ì•„ì´ë””ë‚˜ ì´ë©”ì¼ ê°™ì€ ì‹ë³„ìëŠ” ì§ì ‘ ì…ë ¥í•œ ê°’ì„ ì‚¬ìš©í• ìˆ˜ë„ ìˆê³   
ë˜í•œ ì¼ë ¨ë²ˆí˜¸ë¥¼ ì‹ë³„ìë¡œ ì‚¬ìš©í•˜ê¸°ë„ í•œë‹¤.  
ì¼ë ¨ ë²ˆí˜¸ ë°©ì‹ì€ ë°ì´í„°ë² ì´ìŠ¤ê°€ ì œê³µí•˜ëŠ” ìë™ ì¦ê°€ ê¸°ëŠ¥ì„ ì‚¬ìš©í•œë‹¤.

### ë°¸ë¥˜ íƒ€ì…

```java
public class ShippingInfo {
    // ë°›ëŠ”ì‚¬
    private String receiverName;
    private String receiverPhoneNumber;
    
    // ì£¼
    private String shippingAddress1;
    private String shippingAddress2;
    private String shippingZipcode;
}
```

ë°¸ë¥˜ íƒ€ì…ì€ ê°œë…ì ìœ¼ë¡œ ì™„ì „í•œ í•˜ë‚˜ë¥¼ í‘œí˜„í•  ë•Œ ì‚¬ìš©í•œë‹¤.

```java
public class Receiver {
    private String name;
    private String phoneNumber;
    
    public Receiver(String name, String phoneNumber) {
        this.name = name;
        this.phoneNumber = phoneNumber;
    }
    
    public String getName() {
        return name;
    }
    
    public String getPhoneNumber() {
        return phoneNumber;
    }
}
```

ReceiverëŠ” ë°›ëŠ” ì‚¬ëŒ ì´ë¼ëŠ” ë„ë©”ì¸ ê°œë…ì„ í‘œí˜„í•œë‹¤.  
receiverNameê³¼ receiverPhoneNumber í•„ë“œëŠ” ì´ë¦„ì„ í†µí•´ì„œ ìœ ì¶”í• ìˆ˜ ìˆì§€ë§Œ  
ReceiverëŠ” ê·¸ ìì²´ë¡œ ë°›ëŠ” ì‚¬ëŒì„ ëœ»í•œë‹¤.

```java
public class Address {
    private String address1;
    private String address2;
    private String zipcode;
    
    public Address(String address1, String address2, String zipcode) {
        this.address1 = address1;
        this.address2 = address2;
        this.zipcode = zipcode;
    }
    
    // get ë©”ì„œë“œ
}
```

```java
public class ShippingInfo {
    private Receiver receiver;
    private Address address;
    ...
}
```

ë°¸ë¥˜ íƒ€ì…ì´ ê¼­ ë‘ ê°œ ì´ìƒì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì•¼ í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.  
ì˜ë¯¸ë¥¼ ëª…í™•í•˜ê²Œ í‘œí˜„í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ë„ ìˆë‹¤.

```java
public class OrderLine {
    private Product product;
    private int price;
    private int quantity;
    private int amounts;
    ...
}
```

priceì™€ amountsëŠ” int íƒ€ì…ì˜ ìˆ«ìë¥¼ ì‚¬ìš©í•˜ê³  ìˆì§€ë§Œ ì˜ë¯¸í•˜ëŠ” ê°’ì€ ëˆì´ë‹¤.  
ëˆì„ ì˜ë¯¸í•˜ëŠ” Money íƒ€ì…ì„ ë§Œë“¤ì–´ ì‚¬ìš©í•˜ë©´ ì´í•´í•˜ëŠ”ë° ë„ì›€ì´ ëœë‹¤.

```java
public class OrderLine {
    private Product product;
    private Money price;
    private int quantity;
    private MOney amounts;
    ...
}
```

ë°¸ë¥˜ íƒ€ì…ì„ ì‚¬ìš©í•  ë•Œì˜ ë‹¤ë¥¸ ì¥ì ì€ ë°¸ë¥˜ íƒ€ì…ì„ ìœ„í•œ ê¸°ëŠ¥ì„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.

```java
public class Money {
    ...
    
    public Money add(Money money) {
        return new Money(this.value + money.value);
    }
    
    public Money multiply(int multiplier) {
        return new Money(value * multiplier);
    }
}
```

Moneyë¥¼ ì‚¬ìš©í•˜ëŠ” ì½”ë“œëŠ” ì´ì œ ì •ìˆ˜íƒ€ì… ì—°ì‚° ì´ ì•„ë‹ˆë¼ ëˆ ê³„ì‚° ì´ë¼ëŠ” ì˜ë¯¸ë¡œ ì½”ë“œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆê²Œ ëœë‹¤.

ë°¸ë¥˜ ê°ì²´ì˜ ë°ì´í„°ë¥¼ ë³€ê²½í•  ë•ŒëŠ” ê¸°ì¡´ ë°ì´í„°ë¥¼ ë³€ê²½í•˜ê¸°ë³´ë‹¤ëŠ” ë³€ê²½í•œ ë°ì´í„°ë¥¼ ê°–ëŠ” ìƒˆë¡œìš´ ë°¸ë¥˜ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ë°©ì‹ì„ ì„ í˜¸í•œë‹¤.

```java
Money price = new Money(1000);
OrderLine line = new OrderLine(product, price, 2)
price.setValue(2000);
```

```java
public class OrderLine {
    private Money price;
    
    public OrderLine(Product product, Money price, int quantity) {
        this.product = product;
        // Money ê°ì²´ê°€ ë¶ˆë³€ì´ ì•„ë‹ˆë¼ë©´
        // price íŒŒë¼ë¯¸í„°ê°€ ë³€ê²½ë  ë•Œ ë°œìƒí•˜ëŠ” ë¬¸ì œë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´
        // ë°ì´í„°ë¥¼ ë³µì‚¬í•œ ìƒˆë¡œìš´ ê°ì²´ë¥¼ ìƒì„±í•´ì•¼ í•œë‹¤.
        this.price = new Money(price.getValue());
    }
}
```

Moneyê°€ ë¶ˆë³€ì´ë©´ ì´ëŸ° ì½”ë“œë¥¼ ì‘ì„±í•  í•„ìš”ê°€ ì—†ë‹¤.

{% hint style="info" %}
ì—”í‹°í‹° íƒ€ì…ì˜ ë‘ ê°ì²´ê°€ ê°™ì€ì§€ ë¹„êµí• ë•Œ ì£¼ë¡œ ì‹ë³„ìë¥¼ ì‚¬ìš©í•œë‹¤ë©´  
ë‘ ë°¸ë¥˜ ê°ì²´ê°€ ê°™ì€ì§€ ë¹„êµí•  ë•ŒëŠ” ëª¨ë“  ì†ì„±ì´ ê°™ì€ì§€ ë¹„êµí•´ì•¼ í•œë‹¤.
{% endhint %}

### ì—”í‹°í‹° ì‹ë³„ìì™€ ë°¸ë¥˜ íƒ€ì…

ì—”í‹°í‹° ì‹ë³„ìì˜ ì‹¤ì œ ë°ì´í„°ëŠ” String ê°™ì€ ë¬¸ìì—´ë¡œ êµ¬ì„±ëœ ê²½ìš°ê°€ ë§ë‹¤.  
Moneyê°€ ë‹¨ìˆœ ìˆ«ìê°€ ì•„ë‹Œ ë„ë©”ì¸ì˜ ëˆì„ ì˜ë¯¸í•˜ëŠ” ê²ƒì²˜ëŸ¼ ì‹ë³„ìë¥¼ ìœ„í•œ ë°¸ë¥˜ íƒ€ì…ì„ ì‚¬ìš©í•´ ì˜ë¯¸ê°€ ì˜ ë“œëŸ¬ë‚˜ë„ë¡ í•  ìˆ˜ ìˆë‹¤.

```java
public class Order {
    // OrderNo íƒ€ì… ìì²´ë¡œ idê°€ ì£¼ë¬¸ë²ˆí˜¸ì„ì„ ì•Œ ìˆ˜ ìˆë‹¤.
    private OrderNo id;
}
```

.... êµ³ì´? ğŸ¤” 

### ë„ë©”ì¸ ëª¨ë¸ì— set ë©”ì„œë“œ ë„£ì§€ ì•Šê¸°

ë„ë©”ì¸ ëª¨ë¸ì— get/set ë©”ì„œë“œë¥¼ ë¬´ì¡°ê±´ ì¶”ê°€í•˜ëŠ” ê²ƒì€ ì¢‹ì§€ ì•Šì€ ë²„ë¦‡ì´ë‹¤.  
íŠ¹íˆ set ë©”ì„œë“œëŠ” ë„ë©”ì¸ì˜ í•µì‹¬ ê°œë…ì´ë‚˜ ì˜ë„ë¥¼ ì½”ë“œì—ì„œ ì‚¬ë¼ì§€ê²Œ í•œë‹¤.

```java
public class Order {
    public void setShippingInfo(ShippingInfo newShipping) { .. }
    public void setOrderState(OrderState state) { .. }
}
```

changeShippingInfo\(\) ê°€ ë°°ì†¡ì§€ ì •ë³´ë¥¼ ìƒˆë¡œ ë³€ê²½í•œë‹¤ëŠ” ì˜ë¯¸ë¥¼ ê°€ì¡Œë‹¤ë©´  
setShippingInfo\(\) ë©”ì„œë“œëŠ” ë‹¨ìˆœíˆ ë°°ì†¡ì§€ ê°’ì„ ì„¤ì •í•œë‹¤ëŠ” ê²ƒì„ ëœ»í•œë‹¤.

completePayment\(\) ëŠ” ê²°ì œë¥¼ ì™„ë£Œí–ˆë‹¤ëŠ” ì˜ë¯¸ë¥¼ ê°–ëŠ” ë°˜ë©´ì—  
setOrderState\(\)ëŠ” ë‹¨ìˆœíˆ ì£¼ë¬¸ ìƒíƒœ ê°’ì„ ì„¤ì •í•œë‹¤ëŠ” ê²ƒì„ ëœ»í•œë‹¤.

completePaymentëŠ” ê²°ì œ ì™„ë£Œì™€ ê´€ë ¨ëœ ì²˜ë¦¬ ì½”ë“œë¥¼ í•¨ê²Œ êµ¬í˜„í•˜ê¸° ë•Œë¬¸ì— ê²°ì œ ì™„ë£Œì™€ ê´€ë ¨ëœ ë„ë©”ì¸ ì§€ì‹ì„ ì½”ë“œë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ìì—°ìŠ¤ëŸ½ë‹¤.

setOrderState\(\)ëŠ” ë‹¨ìˆœíˆ ìƒíƒœ ê°’ë§Œ ë³€ê²½í• ì§€ ì•„ë¯¸ë…€ ìƒíƒœ ê°’ì— ë”°ë¼ ë‹¤ë¥¸ ì²˜ë¦¬ë¥¼ ìœ„í•œ ì½”ë“œë¥¼ í•¨ê»˜ êµ¬í˜„í• ì§€ ì• ë§¤í•˜ë‹¤.

set ë©”ì„œë“œì˜ ë˜ ë‹¤ë¥¸ ë¬¸ì œëŠ” ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ ì™„ì „í•œ ìƒíƒœê°€ ì•„ë‹ ìˆ˜ë„ ìˆë‹¤ëŠ”ê²ƒì´ë‹¤.

```java
// set ë©”ì„œë“œë¡œ ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ë„ë¡ êµ¬í˜„í•˜ë©´
// ìƒì„± ì‹œì ì— orderëŠ” ì™„ì „í•˜ì§€ ì•Šë‹¤.
Order order = new Order();

order.setOrderLine(lines);
order.setShippingInfo(shippingInfo);

// ì£¼ë¬¸ìë¥¼ ì„¤ì •í•˜ì§€ ì•Šì€ ìƒíƒœì—ì„œ ì™„ë£Œ ì²˜ë¦¬
order.setState(OrderState.PREPARING);
```

ë¶ˆì™„ì „í•¨ì„ ë§‰ìœ¼ë ¤ë©´ ìƒì„±ìë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ëª¨ë‘ ë°›ì•„ì•¼ í•œë‹¤.

```java
Order order = new Order(orderer, lines, shippingInfo, OrderState.PREPARING);
```

ìƒì„±ìë¡œ í•„ìš”í•œ ê²ƒì„ ëª¨ë‘ ë°›ìœ¼ë©´ í˜¸ì¶œ ì‹œì ì— ë°ì´í„°ê°€ ì˜¬ë°”ë¥¸ì§€ ê²€ì‚¬í•  ìˆ˜ ìˆë‹¤.

```java
public class Order {
    public Order(Orderer orderer, List<OrderLine> orderLines,
            ShippingInfo shippingInfo, OrderState state) {
        setOrderer(orderer);
        setOrderLines(orderLines);
        ....
    }
    
    private void setOrderer() {
        if (orderer == null) throw new IllegalArgumentException("no orderer");
        this.orderer = orderer;
    }
    ...
}
```

ì´ ì½”ë“œì—ì„œ ì¤‘ìš”í•œ ì ì€ ë°”ë¡œ private ì¸ë° privateìœ¼ë¡œ ë˜ì–´ìˆê¸° ë•Œë¬¸ì— ì™¸ë¶€ì—ì„œ ë°ì´í„°ë¥¼ ë³€ê²½í•  ëª©ì ìœ¼ë¡œ set ë©”ì„œë“œë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.

set ë©”ì„œë“œë¥¼ êµ¬í˜„í•´ì•¼ í•  íŠ¹ë³„í•œ ì´ìœ ê°€ ì—†ë‹¤ë©´ ë¬´ì¡°ê±´ ë¶ˆë³€ìœ¼ë¡œ í•œë‹¤.

### ë„ë©”ì¸ ìš©ì–´

ì½”ë“œ ì‘ì„±ì‹œ ë„ë©”ì¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” ìš©ì–´ëŠ” ë§¤ìš° ì¤‘ìš”í•˜ë‹¤.

```java
public OrderState {
    STEP1, STEP2, STEP3, STEP4, STEP5, STEP6 
}
```

ì£¼ë¬¸ ìƒíƒœì˜ ë‹¨ê³„ë¥¼ ìœ„ì²˜ëŸ¼ êµ¬í˜„í–ˆë‹¤ê³  ìƒê°í•´ë³´ì.....

ë„ë©”ì¸ ìš©ì–´ëŠ” ì½”ë“œë¥¼ ì´í•´í•˜ê¸° ì‰½ê²Œ ì‘ì„±í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤.

