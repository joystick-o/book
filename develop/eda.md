---
description: Event Driven Architecture
---

# EDA ( 이벤트 기반 아키텍처 )

## 이벤트 기반 아키텍처란?

먼저 이벤트가 무엇인지 알고가자

간단히 얘기하면 상태의 변화를 이벤트라고 할 수 있다.

* 회원 정보 변경
* 상품의 가격 변경
* 재입고 알림 요청

위와 같이 데이터가 변경 , 등록 등을 이벤트라고 할 수 있는것이다.



### 이벤트 기반 구조의 개발을 왜 해야 하는지?

가장 큰 목적은 서비스간의 느슨한 결합을 위해 한다.

그래서 MSA 와의 궁합이 좋다고 할 수 있다.



### 이벤트 기반 구조를 사용한 이유

기존 레거시를 MSA로 옮기면서 서비스간의 결합도를 충분히 나누지 못했음

정산 시스템을 새로 개발 해야 하는 상황이고 기존 주문 로직과 연결하려 보니

서비스간의 문제가 발생할 가능성이 있어보임.

해서 주문 완료 이벤트를 기점으로 주문 알림과 정산 데이터를 쌓는 서비스를 하나씩 만들어 넣기위함.



### 이벤트 발행

그럼 주문완료 이벤트를 발행하여 전달해줄 Message Broker 를 어떤걸 사용할까

AWS 의 SQS를 이미 사용하고 있는 서비스가 있기 때문에

SNS / SQS 조합을 이용해서 이벤트를 발행/구독 서비스를 구성한다.

<figure><img src="../.gitbook/assets/image (80).png" alt=""><figcaption></figcaption></figure>

주문 서비스에서는 주문완료 이벤트가 발생하면 주문완료 토픽으로 SNS에 메세지를 발행한다.

SNS에서는 주문완료 토픽을 구독하고 있는 SQS 로 메세지를 전부 전달해준다.

SQS 에서는 메세지를 전달받아 이벤트를 처리한다.



